{% extends 'base.html' %}

{% block title %}Actions en Attente - PV en Ligne{% endblock %}

{% block content %}
<div class="container">
    <div class="dashboard-header">
        <h2>ðŸ“‹ Actions en Attente de Validation</h2>
        <p class="user-role">Total : <span class="badge badge-warning">{{ total_count }}</span></p>
    </div>

    {% if pending_actions %}
    <div class="validation-list">
        {% for action in pending_actions %}
        <div class="validation-card">
            <div class="validation-card-header">
                <div>
                    <strong>Action #{{ action.id }}</strong>
                    <span class="text-muted">par {{ action.auteur.username }}</span>
                </div>
                <span class="badge badge-warning">En attente</span>
            </div>

            <div class="validation-card-body">
                <p><strong>Service :</strong> {{ action.service }}</p>
                <p><strong>Description :</strong></p>
                <p class="action-description">{{ action.description }}</p>
                <p class="text-muted"><small>CrÃ©Ã©e le {{ action.date_creation|date:"d/m/Y Ã  H:i" }}</small></p>
            </div>

            <div class="validation-card-actions">
                <a href="{% url 'validate_action' action.id %}" class="btn btn-success btn-sm">
                    âœ“ Valider
                </a>
                <a href="{% url 'reject_action' action.id %}" class="btn btn-danger btn-sm">
                    âœ— Refuser
                </a>
                <a href="{% url 'comment_action' action.id %}" class="btn btn-secondary btn-sm">
                    ðŸ’¬ Commenter
                </a>
                <a href="{% url 'validation_history' action.id %}" class="btn btn-secondary btn-sm">
                    ðŸ“œ Historique
                </a>
            </div>
        </div>
        {% endfor %}
    </div>
    {% else %}
    <div class="empty-state">
        <div class="empty-icon">âœ…</div>
        <h3>Aucune action en attente</h3>
        <p>Toutes les actions ont Ã©tÃ© validÃ©es ou refusÃ©es.</p>
    </div>
    {% endif %}
</div>
{% endblock %}